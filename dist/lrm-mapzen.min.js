!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function corslite(url,callback,cors){function isSuccessful(status){return status>=200&&300>status||304===status}function loaded(){void 0===x.status||isSuccessful(x.status)?callback.call(x,null,x):callback.call(x,x,null)}var sent=!1;if("undefined"==typeof window.XMLHttpRequest)return callback(Error("Browser not supported"));if("undefined"==typeof cors){var m=url.match(/^\s*https?:\/\/[^\/]*/);cors=m&&m[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var x=new window.XMLHttpRequest;if(cors&&!("withCredentials"in x)){x=new window.XDomainRequest;var original=callback;callback=function(){if(sent)original.apply(this,arguments);else{var that=this,args=arguments;setTimeout(function(){original.apply(that,args)},0)}}}return"onload"in x?x.onload=loaded:x.onreadystatechange=function(){4===x.readyState&&loaded()},x.onerror=function(evt){callback.call(this,evt||!0,null),callback=function(){}},x.onprogress=function(){},x.ontimeout=function(evt){callback.call(this,evt,null),callback=function(){}},x.onabort=function(evt){callback.call(this,evt,null),callback=function(){}},x.open("GET",url,!0),x.send(null),sent=!0,x}"undefined"!=typeof module&&(module.exports=corslite)},{}],2:[function(require,module,exports){function encode(coordinate,factor){coordinate=Math.round(coordinate*factor),coordinate<<=1,0>coordinate&&(coordinate=~coordinate);for(var output="";coordinate>=32;)output+=String.fromCharCode((32|31&coordinate)+63),coordinate>>=5;return output+=String.fromCharCode(coordinate+63)}var polyline={};polyline.decode=function(str,precision){for(var latitude_change,longitude_change,index=0,lat=0,lng=0,coordinates=[],shift=0,result=0,byte=null,factor=Math.pow(10,precision||5);index<str.length;){byte=null,shift=0,result=0;do byte=str.charCodeAt(index++)-63,result|=(31&byte)<<shift,shift+=5;while(byte>=32);latitude_change=1&result?~(result>>1):result>>1,shift=result=0;do byte=str.charCodeAt(index++)-63,result|=(31&byte)<<shift,shift+=5;while(byte>=32);longitude_change=1&result?~(result>>1):result>>1,lat+=latitude_change,lng+=longitude_change,coordinates.push([lat/factor,lng/factor])}return coordinates},polyline.encode=function(coordinates,precision){if(!coordinates.length)return"";for(var factor=Math.pow(10,precision||5),output=encode(coordinates[0][0],factor)+encode(coordinates[0][1],factor),i=1;i<coordinates.length;i++){var a=coordinates[i],b=coordinates[i-1];output+=encode(a[0]-b[0],factor),output+=encode(a[1]-b[1],factor)}return output},void 0!==typeof module&&(module.exports=polyline)},{}],3:[function(require,module,exports){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Autocomplete=L.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(e,t,i,s){L.setOptions(this,s),this._elem=e,this._resultFn=s.resultFn?L.Util.bind(s.resultFn,s.resultContext):null,this._autocomplete=s.autocompleteFn?L.Util.bind(s.autocompleteFn,s.autocompleteContext):null,this._selectFn=L.Util.bind(t,i),this._container=L.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=L.DomUtil.create("table","",this._container),L.DomEvent.addListener(this._elem,"input",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),L.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){L.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var e=this._elem.getBoundingClientRect();this._container.parentElement||(this._container.style.left=e.left+window.scrollX+"px",this._container.style.top=e.bottom+window.scrollY+"px",this._container.style.width=e.right-e.left+"px",document.body.appendChild(this._container)),L.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(e){var t,i,s,l;for(delete this._selection,this._results=e;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(t=0;t<e.length;t++)i=L.DomUtil.create("tr","",this._resultTable),i.setAttribute("data-result-index",t),s=L.DomUtil.create("td","",i),l=document.createTextNode(e[t].name),s.appendChild(l),L.DomEvent.addListener(s,"mousedown",L.DomEvent.preventDefault),L.DomEvent.addListener(s,"click",this._createClickListener(e[t]));t||(i=L.DomUtil.create("tr","",this._resultTable),s=L.DomUtil.create("td","leaflet-routing-geocoder-no-results",i),s.innerHTML=this.options.noResultsMessage),this._open(),e.length>0&&this._select(1)},_createClickListener:function(e){var t=this._resultSelected(e);return L.bind(function(){this._elem.blur(),t()},this)},_resultSelected:function(e){return L.bind(function(){this.close(),this._elem.value=e.name,this._lastCompletedText=e.name,this._selectFn(e)},this)},_keyPressed:function(e){var t;return this._isOpen&&13===e.keyCode&&this._selection?(t=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[t])(),void L.DomEvent.preventDefault(e)):13===e.keyCode?void this._complete(this._resultFn,!0):this._autocomplete&&document.activeElement===this._elem?(this._timer&&clearTimeout(this._timer),void(this._timer=setTimeout(L.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout))):void this._unselect()},_select:function(e){var t=this._selection;t&&(L.DomUtil.removeClass(t.firstChild,"leaflet-routing-geocoder-selected"),t=t[e>0?"nextSibling":"previousSibling"]),t||(t=this._resultTable[e>0?"firstChild":"lastChild"]),t&&(L.DomUtil.addClass(t.firstChild,"leaflet-routing-geocoder-selected"),this._selection=t)},_unselect:function(){this._selection&&L.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(e){if(this._isOpen)switch(e.keyCode){case 27:return this.close(),void L.DomEvent.preventDefault(e);case 38:return this._select(-1),void L.DomEvent.preventDefault(e);case 40:return this._select(1),void L.DomEvent.preventDefault(e)}},_complete:function(e,t){function i(e){this._lastCompletedText=s,t&&1===e.length?this._resultSelected(e[0])():this._setResults(e)}var s=this._elem.value;s&&(s!==this._lastCompletedText?e(s,i,this):t&&i.call(this,this._results))}})}()},{}],4:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.extend(t.Routing,require("./L.Routing.Itinerary")),t.extend(t.Routing,require("./L.Routing.Line")),t.extend(t.Routing,require("./L.Routing.Plan")),t.extend(t.Routing,require("./L.Routing.Mapzen")),t.extend(t.Routing,require("./L.Routing.ErrorControl")),t.Routing.Control=t.Routing.Itinerary.extend({options:{fitSelectedRoutes:"smart",routeLine:function(i,e){return t.Routing.line(i,e)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",useZoomParameter:!1,showAlternatives:!1},initialize:function(i){t.Util.setOptions(this,i),this._router=this.options.router||new t.Routing.OSRM(i),this._plan=this.options.plan||t.Routing.plan(this.options.waypoints,i),this._requestCount=0,t.Routing.Itinerary.prototype.initialize.call(this,i),this.on("routeselected",this._routeSelected,this),this._plan.on("waypointschanged",this._onWaypointsChanged,this),i.routeWhileDragging&&this._setupRouteDragging(),this.options.autoRoute&&this.route()},onAdd:function(i){var e=t.Routing.Itinerary.prototype.onAdd.call(this,i);return this._map=i,this._map.addLayer(this._plan),this.options.useZoomParameter&&this._map.on("zoomend",function(){this.route({callback:t.bind(this._updateLineCallback,this)})},this),this._plan.options.geocoder&&e.insertBefore(this._plan.createGeocoders(),e.firstChild),e},onRemove:function(i){return this._line&&i.removeLayer(this._line),i.removeLayer(this._plan),t.Routing.Itinerary.prototype.onRemove.call(this,i)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(t){return this._plan.setWaypoints(t),this},spliceWaypoints:function(){var t=this._plan.spliceWaypoints.apply(this._plan,arguments);return t},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(t){var i=t.route,e=this.options.showAlternatives&&t.alternatives,n=this.options.fitSelectedRoutes,o="smart"===n&&!this._waypointsVisible()||"smart"!==n&&n;this._updateLines({route:i,alternatives:e}),o&&this._map.fitBounds(this._line.getBounds()),"snap"===this.options.waypointMode&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(i.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var i,e,n,o,s,a=this.getWaypoints();try{for(i=this._map.getSize(),o=0;o<a.length;o++)s=this._map.latLngToLayerPoint(a[o].latLng),e?e.extend(s):e=t.bounds([s]);return n=e.getSize(),(n.x>i.x/5||n.y>i.y/5)&&this._waypointsInViewport()}catch(r){return!1}},_waypointsInViewport:function(){var t,i,e=this.getWaypoints();try{t=this._map.getBounds()}catch(n){return!1}for(i=0;i<e.length;i++)if(t.contains(e[i].latLng))return!0;return!1},_updateLines:function(i){var e=void 0!==this.options.addWaypoints?this.options.addWaypoints:!0;this._clearLines(),this._alternatives=[],i.alternatives&&i.alternatives.forEach(function(i,e){this._alternatives[e]=this.options.routeLine(i,t.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[e].addTo(this._map),this._hookAltEvents(this._alternatives[e])},this),this._line=this.options.routeLine(i.route,t.extend({addWaypoints:e,extendToWaypoints:"connect"===this.options.waypointMode},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(t){t.on("linetouched",function(t){this._plan.dragNewWaypoint(t)},this)},_hookAltEvents:function(t){t.on("linetouched",function(t){var i=this._routes.slice(),e=i.splice(t.target._route.routesIndex,1)[0];this.fire("routeselected",{route:e,alternatives:i})},this)},_onWaypointsChanged:function(t){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:t.waypoints})},_setupRouteDragging:function(){var i,e=0;this._plan.on("waypointdrag",t.bind(function(n){i=n.waypoints,e||(e=setTimeout(t.bind(function(){this.route({waypoints:i,geometryOnly:!0,callback:t.bind(this._updateLineCallback,this)}),e=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){e&&(clearTimeout(e),e=void 0),this.route()},this)},_updateLineCallback:function(t,i){t?this._clearLines():this._updateLines({route:i[0],alternatives:i.slice(1)})},route:function(t){var i,e=++this._requestCount;t=t||{},this._plan.isReady()&&(this.options.useZoomParameter&&(t.z=this._map&&this._map.getZoom()),i=t&&t.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:i}),this._router.route(i,t.callback||function(n,o){if(e===this._requestCount){if(this._clearLines(),this._clearAlts(),n)return console.log(n),void this.fire("routingerror",{error:n});if(o.forEach(function(t,i){t.routesIndex=i}),t.geometryOnly){var s=o.splice(0,1)[0];this._routeSelected({route:s,alternatives:o})}else this.fire("routesfound",{waypoints:i,routes:o}),this.setAlternatives(o)}},this,t))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var t in this._alternatives)this._map.removeLayer(this._alternatives[t]);this._alternatives=[]}}}),t.Routing.control=function(i){return new t.Routing.Control(i)},module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.ErrorControl":5,"./L.Routing.Itinerary":8,"./L.Routing.Line":10,"./L.Routing.Mapzen":13,"./L.Routing.Plan":14}],5:[function(require,module,exports){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.ErrorControl=L.Control.extend({options:{header:"Routing error",formatMessage:function(e){return e.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+e.message+"</pre></code":"The route could not be calculated. "+e.message}},initialize:function(e,t){L.Control.prototype.initialize.call(this,t),e.on("routingerror",L.bind(function(e){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(e.error),this._element.style.visibility="visible")},this)).on("routingstart",L.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var e,t;return this._element=L.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",e=L.DomUtil.create("h3",null,this._element),t=L.DomUtil.create("span",null,this._element),e.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}}),L.Routing.errorControl=function(e,t){return new L.Routing.ErrorControl(e,t)}}()},{}],6:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.extend(t.Routing,require("./L.Routing.Localization")),t.Routing.Formatter=t.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mín",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(e){t.setOptions(this,e)},formatDistance:function(e,n){var i,r,o,a,u=this.options.unitNames,s=0>=n,h=s?function(t){return t}:t.bind(this._round,this);return"imperial"===this.options.units?(r=e/.9144,o=r>=1e3?{value:h(e/1609.344,n),unit:u.miles}:{value:h(r,n),unit:u.yards}):(i=h(e,n),o={value:i>=1e3?i/1e3:i,unit:i>=1e3?u.kilometers:u.meters}),s&&(a=Math.pow(10,-n),o.value=Math.round(o.value*a)/a),t.Util.template(this.options.distanceTemplate,o)},_round:function(t,e){var n=e||this.options.roundingSensitivity,i=Math.pow(10,(Math.floor(t/n)+"").length-1),r=Math.floor(t/i),o=r>5?i:i/2;return Math.round(t/o)*o},formatTime:function(t){return t>86400?Math.round(t/3600)+" h":t>3600?Math.floor(t/3600)+" h "+Math.round(t%3600/60)+" min":t>300?Math.round(t/60)+" min":t>60?Math.floor(t/60)+" min"+(t%60!==0?" "+t%60+" s":""):t+" s"},formatInstruction:function(e,n){return void 0===e.text?t.Util.template(this._getInstructionTemplate(e,n),t.extend({exitStr:e.exit?t.Routing.Localization[this.options.language].formatOrder(e.exit):"",dir:t.Routing.Localization[this.options.language].directions[e.direction]},e)):e.text},getIconName:function(t,e){switch(t.type){case"Straight":return 0===e?"depart":"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left";case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}},_getInstructionTemplate:function(e,n){var i="Straight"===e.type?0===n?"Head":"Continue":e.type,r=t.Routing.Localization[this.options.language].instructions[i];return r[0]+(r.length>1&&e.road?r[1]:"")}}),module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Localization":11}],7:[function(require,module,exports){(function(global){!function(){"use strict";function e(e){e.setSelectionRange?e.setSelectionRange(0,9999):e.select()}var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.extend(t.Routing,require("./L.Routing.Autocomplete")),t.Routing.GeocoderElement=t.Class.extend({includes:t.Mixin.Events,options:{createGeocoder:function(e,o,n){var i=t.DomUtil.create("div","leaflet-routing-geocoder"),a=t.DomUtil.create("input","",i),s=n.addWaypoints?t.DomUtil.create("span","leaflet-routing-remove-waypoint",i):void 0;return a.disabled=!n.addWaypoints,{container:i,input:a,closeButton:s}},geocoderPlaceholder:function(e,o,n){var i=t.Routing.Localization[n.options.language].ui;return 0===e?i.startPlaceholder:o-1>e?t.Util.template(i.viaPlaceholder,{viaNumber:e}):i.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(e){var t=e.lat<0?"S":"N",o=e.lng<0?"W":"E",n=(Math.round(1e4*Math.abs(e.lat))/1e4).toString(),i=(Math.round(1e4*Math.abs(e.lng))/1e4).toString();return t+n+", "+o+i},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(o,n,i,a){t.setOptions(this,a);var s=this.options.createGeocoder(n,i,this.options),r=s.closeButton,c=s.input;c.setAttribute("placeholder",this.options.geocoderPlaceholder(n,i,this)),c.className=this.options.geocoderClass(n,i),this._element=s,this._waypoint=o,this.update(),c.value=o.name,t.DomEvent.addListener(c,"click",function(){e(this)},c),r&&t.DomEvent.addListener(r,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new t.Routing.Autocomplete(c,function(e){c.value=e.name,o.name=e.name,o.latLng=e.center,this.fire("geocoded",{waypoint:o,value:e})},this,t.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(e){this._element.input.value=e},update:function(e){var t,o=this._waypoint;o.name=o.name||"",!o.latLng||!e&&o.name||(t=this.options.waypointNameFallback(o.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(o.latLng,67108864,function(e){e.length>0&&e[0].center.distanceTo(o.latLng)<this.options.maxGeocoderTolerance?o.name=e[0].name:o.name=t,this._update()},this):(o.name=t,this._update()))},focus:function(){var t=this._element.input;t.focus(),e(t)},_update:function(){var e=this._waypoint,t=e&&e.name?e.name:"";this.setValue(t),this.fire("reversegeocoded",{waypoint:e,value:t})}}),t.Routing.geocoderElement=function(e,o,n,i){return new t.Routing.GeocoderElement(e,o,n,i)},module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Autocomplete":3}],8:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.extend(t.Routing,require("./L.Routing.Formatter")),t.extend(t.Routing,require("./L.Routing.ItineraryBuilder")),t.Routing.Itinerary=t.Control.extend({includes:t.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(e){var i=t.DomUtil.create("span",e.options.collapseBtnClass);t.DomEvent.on(i,"click",e._toggle,e),e._container.insertBefore(i,e._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(e){t.setOptions(this,e),this._formatter=this.options.formatter||new t.Routing.Formatter(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new t.Routing.ItineraryBuilder({containerClassName:this.options.itineraryClassName})},onAdd:function(e){var i=this.options.collapsible;return i=i||void 0===i&&e.getSize().x<=640,this._container=t.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(i?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),t.DomEvent.disableClickPropagation(this._container),t.DomEvent.addListener(this._container,"mousewheel",function(e){t.DomEvent.stopPropagation(e)}),i&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return t.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(t){var e,i,n;for(this._clearAlts(),this._routes=t,e=0;e<this._routes.length;e++)i=this._routes[e],n=this._createAlternative(i,e),this._altContainer.appendChild(n),this._altElements.push(n);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){t.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){t.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var e=t.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[e?"show":"hide"]()},_createAlternative:function(e,i){var n=t.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(i>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),o=this.options.summaryTemplate,r=t.extend({name:e.name,distance:this._formatter.formatDistance(e.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(e.summary.totalTime)},e);return n.innerHTML="function"==typeof o?o(r):t.Util.template(o,r),t.DomEvent.addListener(n,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),n.appendChild(this._createItineraryContainer(e)),n},_clearAlts:function(){for(var t=this._altContainer;t&&t.firstChild;)t.removeChild(t.firstChild);this._altElements=[]},_createItineraryContainer:function(t){var e,i,n,o,r,a,s=this._itineraryBuilder.createContainer(),l=this._itineraryBuilder.createStepsContainer();for(s.appendChild(l),e=0;e<t.instructions.length;e++)i=t.instructions[e],r=this._formatter.formatInstruction(i,e),o=this._formatter.formatDistance(i.distance),a=this._formatter.getIconName(i,e),n=this._itineraryBuilder.createStep(r,o,a,l),this._addRowListeners(n,t.coordinates[i.index]);return s},_addRowListeners:function(e,i){t.DomEvent.addListener(e,"mouseover",function(){this._marker=t.circleMarker(i,this.options.pointMarkerStyle).addTo(this._map)},this),t.DomEvent.addListener(e,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),t.DomEvent.addListener(e,"click",function(e){this._map.panTo(i),t.DomEvent.stopPropagation(e)},this)},_onAltClicked:function(e){for(var i=e.target||window.event.srcElement;!t.DomUtil.hasClass(i,"leaflet-routing-alt");)i=i.parentElement;var n=this._altElements.indexOf(i),o=this._routes.slice(),r=o.splice(n,1)[0];this.fire("routeselected",{route:r,alternatives:o})},_selectAlt:function(e){var i,n,o,r;if(i=this._altElements[e.route.routesIndex],t.DomUtil.hasClass(i,"leaflet-routing-alt-minimized"))for(n=0;n<this._altElements.length;n++)o=this._altElements[n],r=n===e.route.routesIndex?"removeClass":"addClass",t.DomUtil[r](o,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&t.DomUtil[r](o,this.options.minimizedClassName),n!==e.route.routesIndex&&(o.scrollTop=0);t.DomEvent.stop(e)},_selectRoute:function(t){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",t)}}),t.Routing.itinerary=function(e){return new t.Routing.Itinerary(e)},module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Formatter":6,"./L.Routing.ItineraryBuilder":9}],9:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.Routing.ItineraryBuilder=t.Class.extend({options:{containerClassName:""},initialize:function(e){t.setOptions(this,e)},createContainer:function(e){var i=t.DomUtil.create("table",e||""),n=t.DomUtil.create("colgroup","",i);return t.DomUtil.create("col","leaflet-routing-instruction-icon",n),t.DomUtil.create("col","leaflet-routing-instruction-text",n),t.DomUtil.create("col","leaflet-routing-instruction-distance",n),i},createStepsContainer:function(){return t.DomUtil.create("tbody","")},createStep:function(e,i,n,o){var r,a,c=t.DomUtil.create("tr","",o);return a=t.DomUtil.create("td","",c),r=t.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+n,a),a.appendChild(r),a=t.DomUtil.create("td","",c),a.appendChild(document.createTextNode(e)),a=t.DomUtil.create("td","",c),a.appendChild(document.createTextNode(i)),c}}),module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.Routing.Line=t.LayerGroup.extend({includes:t.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(i,o){if(t.setOptions(this,o),t.LayerGroup.prototype.initialize.call(this,o),this._route=i,this.options.extendToWaypoints&&this._extendToWaypoints(),i.subRoutes)for(var e=0;e<i.subRoutes.length;e++)i.subRoutes[e].styles||(i.subRoutes[e].styles=this.options.styles),this._addSegment(i.subRoutes[e].coordinates,i.subRoutes[e].styles,this.options.addWaypoints);else this._addSegment(i.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(t){return t.addLayer(this),this},getBounds:function(){return t.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var t,i=this._route.inputWaypoints,o=[];for(t=0;t<i.length;t++)o.push(this._findClosestRoutePoint(i[t].latLng));return o},_findClosestRoutePoint:function(t){var i,o,e,n=Number.MAX_VALUE;for(o=this._route.coordinates.length-1;o>=0;o--)e=t.distanceTo(this._route.coordinates[o]),n>e&&(i=o,n=e);return i},_extendToWaypoints:function(){var i,o,e,n=this._route.inputWaypoints,s=this._getWaypointIndices();for(i=0;i<n.length;i++)o=n[i].latLng,e=t.latLng(this._route.coordinates[s[i]]),o.distanceTo(e)>this.options.missingRouteTolerance&&this._addSegment([o,e],this.options.missingRouteStyles)},_addSegment:function(i,o,e){var n,s;for(n=0;n<o.length;n++)s=t.polyline(i,o[n]),this.addLayer(s),e&&s.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(t){for(var i=this._getWaypointIndices(),o=i.length-1;o>=0&&i[o]>t;)o--;return o},_onLineTouched:function(t){var i=this._findNearestWpBefore(this._findClosestRoutePoint(t.latlng));this.fire("linetouched",{afterIndex:i,latlng:t.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}}),t.Routing.line=function(i,o){return new t.Routing.Line(i,o)},module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(require,module,exports){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Localization={en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"," on {road}"],SlightRight:["Slight right"," onto {road}"],Right:["Right"," onto {road}"],SharpRight:["Sharp right"," onto {road}"],TurnAround:["Turn around"],SharpLeft:["Sharp left"," onto {road}"],Left:["Left"," onto {road}"],SlightLeft:["Slight left"," onto {road}"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"]},formatOrder:function(e){var r=e%10-1,a=["st","nd","rd"];return a[r]?e+a[r]:e+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Südosten",S:"Süden",SW:"Südwesten",W:"Westen",NW:"Nordwesten"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"]},formatOrder:function(e){return e+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"öst",SE:"sydost",S:"syd",SW:"sydväst",W:"väst",NW:"nordväst"},instructions:{Head:["Åk åt {dir}"," på {road}"],Continue:["Fortsätt {dir}"," på {road}"],SlightRight:["Svagt höger"," på {road}"],Right:["Sväng höger"," på {road}"],SharpRight:["Skarpt höger"," på {road}"],TurnAround:["Vänd"],SharpLeft:["Skarpt vänster"," på {road}"],Left:["Sväng vänster"," på {road}"],SlightLeft:["Svagt vänster"," på {road}"],WaypointReached:["Viapunkt nådd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans mål"]},formatOrder:function(e){return["första","andra","tredje","fjärde","femte","sjätte","sjunde","åttonde","nionde","tionde"][e-1]},ui:{startPlaceholder:"Från",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},sp:{directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],SlightRight:["Leve giro a la derecha"," sobre {road}"],Right:["Derecha"," sobre {road}"],SharpRight:["Giro pronunciado a la derecha"," sobre {road}"],TurnAround:["Dar vuelta"],SharpLeft:["Giro pronunciado a la izquierda"," sobre {road}"],Left:["Izquierda"," en {road}"],SlightLeft:["Leve giro a la izquierda"," en {road}"],WaypointReached:["Llegó a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"}},nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(e){return 1===e||e>=20?e+"ste":e+"de"},ui:{
startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Légèrement à droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Complètement à droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Complètement à gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Légèrement à gauche"," sur {road}"],WaypointReached:["Point d'étape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Départ",viaPlaceholder:"Intermédiaire {viaNumber}",endPlaceholder:"Arrivée"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} saída na rotatória"," na {road}"],DestinationReached:["Destino atingido"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermédio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovýchod",E:"východ",SE:"juhovýchod",S:"juh",SW:"juhozápad",W:"západ",NW:"serverozápad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokračujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otočte sa"],SharpLeft:["Prudko doľava"," na {road}"],Left:["Doľava"," na {road}"],SlightLeft:["Mierne doľava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbočte na {exitStr} výjazde"," na {road}"],DestinationReached:["Prišli ste do cieľa."]},formatOrder:function(e){var r=e%10-1,a=[".",".","."];return a[r]?e+a[r]:e+"."},ui:{startPlaceholder:"Začiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"βόρεια",NE:"βορειοανατολικά",E:"ανατολικά",SE:"νοτιοανατολικά",S:"νότια",SW:"νοτιοδυτικά",W:"δυτικά",NW:"βορειοδυτικά"},instructions:{Head:["Κατευθυνθείτε {dir}"," στην {road}"],Continue:["Συνεχίστε {dir}"," στην {road}"],SlightRight:["Ελαφρώς δεξιά"," στην {road}"],Right:["Δεξιά"," στην {road}"],SharpRight:["Απότομη δεξιά στροφή"," στην {road}"],TurnAround:["Κάντε αναστροφή"],SharpLeft:["Απότομη αριστερή στροφή"," στην {road}"],Left:["Αριστερά"," στην {road}"],SlightLeft:["Ελαφρώς αριστερά"," στην {road}"],WaypointReached:["Φτάσατε στο σημείο αναφοράς"],Roundabout:["Ακολουθήστε την {exitStr} έξοδο στο κυκλικό κόμβο"," στην {road}"],DestinationReached:["Φτάσατε στον προορισμό σας"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Αφετηρία",viaPlaceholder:"μέσω {viaNumber}",endPlaceholder:"Προορισμός"}}},module.exports=L.Routing}()},{}],12:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.Routing.Mapzen.Formatter=t.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mín",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(e){t.setOptions(this,e)},formatDistance:function(e){var n,r,i=this.options.unitNames;return"imperial"===this.options.units?(e=1e3*e,e/=1.609344,r=e>=1e3?{value:this._round(e)/1e3,unit:i.miles}:{value:this._round(e/1.76),unit:i.yards}):(n=e,r={value:n>=1?n:1e3*n,unit:n>=1?i.kilometers:i.meters}),t.Util.template(this.options.distanceTemplate,r)},_round:function(t){var e=Math.pow(10,(Math.floor(t/this.options.roundingSensitivity)+"").length-1),n=Math.floor(t/e),r=n>5?e:e/2;return Math.round(t/r)*r},formatTime:function(t){return t>86400?Math.round(t/3600)+" h":t>3600?Math.floor(t/3600)+" h "+Math.round(t%3600/60)+" min":t>300?Math.round(t/60)+" min":t>60?Math.floor(t/60)+" min"+(t%60!==0?" "+t%60+" s":""):t+" s"},formatInstruction:function(t,e){return t.instruction},getIconName:function(t,e){switch(t.type){case 0:return"kNone";case 1:return"kStart";case 2:return"kStartRight";case 3:return"kStartLeft";case 4:return"kDestination";case 5:return"kDestinationRight";case 6:return"kDestinationLeft";case 7:return"kBecomes";case 8:return"kContinue";case 9:return"kSlightRight";case 10:return"kRight";case 11:return"kSharpRight";case 12:return"kUturnRight";case 13:return"kUturnLeft";case 14:return"kSharpLeft";case 15:return"kLeft";case 16:return"kSlightLeft";case 17:return"kRampStraight";case 18:return"kRampRight";case 19:return"kRampLeft";case 20:return"kExitRight";case 21:return"kExitLeft";case 22:return"kStayStraight";case 23:return"kStayRight";case 24:return"kStayLeft";case 25:return"kMerge";case 26:return"kRoundaboutEnter";case 27:return"kRoundaboutExit";case 28:return"kFerryEnter";case 29:return"kFerryExit";case 30:case 31:case 32:case 33:case 34:case 35:case 36:return t.edited_travel_type?"kTransit"+this._getCapitalizedName(t.edited_travel_type):"kTransit"}},_getInstructionTemplate:function(t,e){return t.instruction+" "+t.length},_getCapitalizedName:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null,e=require("corslite"),n=require("polyline");t.Routing=t.Routing||{},t.Routing.Mapzen=t.Class.extend({options:{timeout:3e4},initialize:function(e,n){t.Util.setOptions(this,n),this._accessToken=e,this._hints={locations:{}}},route:function(n,i,o,s){var a,r,l,u,p=!1,c=[],h={};for(h=this.options||{},a=this.buildRouteUrl(n,h),r=setTimeout(function(){p=!0,i.call(o||i,{status:-1,message:"Time out."})},this.options.timeout),u=0;u<n.length;u++)l=n[u],c.push({latLng:l.latLng,name:l.name||"",options:l.options||{}});return e(a,t.bind(function(t,e){var n;clearTimeout(r),p||(t?(console.log("Error : "+t.response),i.call(o||i,{status:t.status,message:t.response})):(n=JSON.parse(e.responseText),this._routeDone(n,c,h,i,o)))},this),!0),this},_routeDone:function(t,e,i,o,s){var a,r,l,u;if(s=s||o,0!==t.trip.status)return void o.call(s,{status:t.status,message:t.status_message});for(var p=[],a=[],c=0,u=0;u<t.trip.legs.length;u++){for(var h=n.decode(t.trip.legs[u].shape,6),g=0;g<h.length;g++)a.push(h[g]);for(var _=0;_<t.trip.legs[u].maneuvers.length;_++){var m=t.trip.legs[u].maneuvers[_];m.distance=t.trip.legs[u].maneuvers[_].length,m.index=c+t.trip.legs[u].maneuvers[_].begin_shape_index,p.push(m)}"multimodal"===i.costing&&(p=this._unifyTransitManeuver(p)),c+=t.trip.legs[u].maneuvers[t.trip.legs[u].maneuvers.length-1].begin_shape_index}l=this._toWaypoints(e,t.trip.locations);var v;"multimodal"==i.costing&&(v=this._getSubRoutes(t.trip.legs)),r=[{name:this._trimLocationKey(e[0].latLng)+" , "+this._trimLocationKey(e[1].latLng),unit:t.trip.units,costing:i.costing,coordinates:a,subRoutes:v,instructions:p,summary:t.trip.summary?this._convertSummary(t.trip.summary):[],inputWaypoints:e,waypoints:l,waypointIndices:this._clampIndices([0,t.trip.legs[0].maneuvers.length],a)}],t.hint_data&&this._saveHintData(t.hint_data,e),o.call(s,null,r)},_unifyTransitManeuver:function(t){for(var e,n=t,i=0;i<n.length;i++)if(30==n[i].type){e=n[i].travel_type;break}for(var o=0;o<n.length;o++)n[o].type>29&&(n[o].edited_travel_type=e);return n},_getSubRoutes:function(t){for(var e=[],i=0;i<t.length;i++){for(var o,s=n.decode(t[i].shape,6),a=[],r=0;r<t[i].maneuvers.length;r++){var l=t[i].maneuvers[r],u=l.travel_type;u===o&&31!==l.type||(l.begin_shape_index>0&&a.push(l.begin_shape_index),l.transit_info?e.push({travel_type:u,styles:this._getPolylineColor(l.transit_info.color)}):e.push({travel_type:u})),o=u}a.push(s.length);for(var p=0,c=0;c<a.length;c++){var h=[],g=0;c!==a.length-1&&(g=1);for(var _=p;_<a[c]+g;_++)h.push(s[_]);var m=h;p=a[c],e[c].coordinates=m}}return e},_getPolylineColor:function(t){var e=t>>16&255,n=t>>8&255,i=t>>0&255,o=.299*e+.587*n+.114*i,s=o>187,a=16777216|16777215&t,r=a.toString(16).substring(1,7),l=[s?{color:"#000",opacity:.4,weight:10}:{color:"#fff",opacity:.8,weight:10},{color:"#"+r.toUpperCase(),opacity:1,weight:6}];return l},_saveHintData:function(t,e){var n;this._hints={checksum:t.checksum,locations:{}};for(var i=t.locations.length-1;i>=0;i--)n=e[i].latLng,this._hints.locations[this._locationKey(n)]=t.locations[i]},_toWaypoints:function(e,n){var i,o=[];for(i=0;i<n.length;i++)o.push(t.Routing.waypoint(t.latLng([n[i].lat,n[i].lon]),"name",{}));return o},buildRouteUrl:function(t,e){for(var n,i="https://valhalla.mapzen.com",o=[],s=e.costing,a=e.costing_options,r=e.directions_options,l=e.date_time,u=0;u<t.length;u++){var p;n=this._locationKey(t[u].latLng).split(","),p=0===u||u===t.length-1?{lat:parseFloat(n[0]),lon:parseFloat(n[1]),type:"break"}:{lat:parseFloat(n[0]),lon:parseFloat(n[1]),type:"through"},o.push(p)}var c=JSON.stringify({locations:o,costing:s,costing_options:a,directions_options:r,date_time:l});return i+"/route?json="+c+"&api_key="+this._accessToken},_locationKey:function(t){return t.lat+","+t.lng},_trimLocationKey:function(t){var e=(t.lat,t.lng,Math.floor(1e3*t.lat)/1e3),n=Math.floor(1e3*t.lng)/1e3;return e+" , "+n},_convertSummary:function(t){return{totalDistance:t.length,totalTime:t.time}},_convertInstructions:function(t){var e,n,i,o,s=[];for(e=0;e<t.length;e++)n=t[e],i=this._drivingDirectionType(n[0]),o=n[0].split("-"),i&&s.push({type:i,distance:n[2],time:n[4],road:n[1],direction:n[6],exit:o.length>1?o[1]:void 0,index:n[3]});return s},_clampIndices:function(t,e){var n,i=e.length-1;for(n=0;n<t.length;n++)t[n]=Math.min(i,Math.max(t[n],0))}}),t.Routing.mapzen=function(e,n){return new t.Routing.Mapzen(e,n)},module.exports=t.Routing.Mapzen}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{corslite:1,polyline:2}],14:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.extend(t.Routing,require("./L.Routing.GeocoderElement")),t.extend(t.Routing,require("./L.Routing.Waypoint")),t.Routing.Plan=t.Class.extend({includes:t.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:t.Routing.geocoderElement,createMarker:function(e,i){var n={draggable:this.draggableWaypoints},o=t.marker(i.latLng,n);return o},geocodersClassName:""},initialize:function(e,i){t.Util.setOptions(this,i),this._waypoints=[],this.setWaypoints(e)},isReady:function(){var t;for(t=0;t<this._waypoints.length;t++)if(!this._waypoints[t].latLng)return!1;return!0},getWaypoints:function(){var t,e=[];for(t=0;t<this._waypoints.length;t++)e.push(this._waypoints[t]);return e},setWaypoints:function(t){var e=[0,this._waypoints.length].concat(t);return this.spliceWaypoints.apply(this,e),this},spliceWaypoints:function(){var e,i=[arguments[0],arguments[1]];for(e=2;e<arguments.length;e++)i.push(arguments[e]&&arguments[e].hasOwnProperty("latLng")?arguments[e]:t.Routing.waypoint(arguments[e]));for([].splice.apply(this._waypoints,i);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,i)},onAdd:function(t){this._map=t,this._updateMarkers()},onRemove:function(){var t;if(this._removeMarkers(),this._newWp)for(t=0;t<this._newWp.lines.length;t++)this._map.removeLayer(this._newWp.lines[t]);delete this._map},createGeocoders:function(){var e,i,n=t.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),o=this._waypoints;return this._geocoderContainer=n,this._geocoderElems=[],this.options.addWaypoints&&(e=t.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,n),e.setAttribute("type","button"),t.DomEvent.addListener(e,"click",function(){this.spliceWaypoints(o.length,0,null)},this)),this.options.reverseWaypoints&&(i=t.DomUtil.create("button","leaflet-routing-reverse-waypoints",n),i.setAttribute("type","button"),t.DomEvent.addListener(i,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),n},_createGeocoder:function(e){var i=this.options.createGeocoderElement(this._waypoints[e],e,this._waypoints.length,this.options);return i.on("delete",function(){e>0||this._waypoints.length>2?this.spliceWaypoints(e,1):this.spliceWaypoints(e,1,new t.Routing.Waypoint)},this).on("geocoded",function(t){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(e+1),this.fire("waypointgeocoded",{waypointIndex:e,waypoint:t.waypoint})},this).on("reversegeocoded",function(t){this.fire("waypointgeocoded",{waypointIndex:e,waypoint:t.waypoint})},this),i},_updateGeocoders:function(){var t,e,i=[];for(t=0;t<this._geocoderElems.length;t++)this._geocoderContainer.removeChild(this._geocoderElems[t].getContainer());for(t=this._waypoints.length-1;t>=0;t--)e=this._createGeocoder(t),this._geocoderContainer.insertBefore(e.getContainer(),this._geocoderContainer.firstChild),i.push(e);this._geocoderElems=i.reverse()},_removeMarkers:function(){var t;if(this._markers)for(t=0;t<this._markers.length;t++)this._markers[t]&&this._map.removeLayer(this._markers[t]);this._markers=[]},_updateMarkers:function(){var t,e;if(this._map)for(this._removeMarkers(),t=0;t<this._waypoints.length;t++)this._waypoints[t].latLng?(e=this.options.createMarker(t,this._waypoints[t],this._waypoints.length),e&&(e.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(e,t))):e=null,this._markers.push(e)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(e,i,n){var o,s,a=function(t){return n?t.latlng:t.target.getLatLng()},r=t.bind(function(t){this.fire("waypointdragstart",{index:i,latlng:a(t)})},this),h=t.bind(function(t){this._waypoints[i].latLng=a(t),this.fire("waypointdrag",{index:i,latlng:a(t)})},this),p=t.bind(function(t){this._waypoints[i].latLng=a(t),this._waypoints[i].name="",this._geocoderElems&&this._geocoderElems[i].update(!0),this.fire("waypointdragend",{index:i,latlng:a(t)}),this._fireChanged()},this);n?(o=t.bind(function(t){this._markers[i].setLatLng(t.latlng),h(t)},this),s=t.bind(function(t){this._map.dragging.enable(),this._map.off("mouseup",s),this._map.off("mousemove",o),p(t)},this),this._map.dragging.disable(),this._map.on("mousemove",o),this._map.on("mouseup",s),r({latlng:this._waypoints[i].latLng})):(e.on("dragstart",r),e.on("drag",h),e.on("dragend",p))},dragNewWaypoint:function(t){var e=t.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(e,0,t.latlng),this._hookWaypointEvents(this._markers[e],e,!0)):this._dragNewWaypoint(e,t.latlng)},_dragNewWaypoint:function(e,i){var n,o=new t.Routing.Waypoint(i),s=this._waypoints[e-1],a=this._waypoints[e],r=this.options.createMarker(e,o,this._waypoints.length+1),h=[],p=t.bind(function(t){var e;for(r&&r.setLatLng(t.latlng),e=0;e<h.length;e++)h[e].spliceLatLngs(1,1,t.latlng)},this),l=t.bind(function(t){var i;for(r&&this._map.removeLayer(r),i=0;i<h.length;i++)this._map.removeLayer(h[i]);this._map.off("mousemove",p),this._map.off("mouseup",l),this.spliceWaypoints(e,0,t.latlng)},this);for(r&&r.addTo(this._map),n=0;n<this.options.dragStyles.length;n++)h.push(t.polyline([s.latLng,i,a.latLng],this.options.dragStyles[n]).addTo(this._map));this._map.on("mousemove",p),this._map.on("mouseup",l)},_focusGeocoder:function(t){this._geocoderElems[t]?this._geocoderElems[t].focus():document.activeElement.blur()}}),t.Routing.plan=function(e,i){return new t.Routing.Plan(e,i)},module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.GeocoderElement":7,"./L.Routing.Waypoint":15}],15:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:"undefined"!=typeof global?global.L:null;t.Routing=t.Routing||{},t.Routing.Waypoint=t.Class.extend({options:{allowUTurn:!1},initialize:function(n,i,o){t.Util.setOptions(this,o),this.latLng=t.latLng(n),this.name=i}}),t.Routing.waypoint=function(n,i,o){return new t.Routing.Waypoint(n,i,o)},module.exports=t.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3,4,5,6,7,8,9,10,11,12,13,14,15]);
